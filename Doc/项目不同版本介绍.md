# 项目不同版本介绍

-----

## V2.0

此版本中,我们团队主要开发目的是开发,所有基础接口以及所有扩展接口扩展

### 主要使用的技术

1. 在视频投稿接口中采用阿里云`OSS`,将所有视频以及封面截图上传至云端
2. 在数据库存储方面,使用阿里云的云上数据库(`MySQL`)进行所有数据表的存储
3. 主要开发语言`golang`,主要使用开发框架 `gin`、`gorm`
4. 项目部署在阿里云服务器上(单机),ip地址:47.95.117.216(只需要使用官方提供的客户端APP,并且按照说明配置ip地址即可使用)

**注意:如果使用官方提供的APP,并且下载手机上配第4条提供ip使用,投稿的发布按钮会没有反应,这个问题是客户端的错误,抓包后会发现,会报408错误,这个错误的主要原因是客户端发送数据时,有字段的长度没有指定,服务端校验会发生错误,此问题不确定是否跟手机型号有关**

解决办法

- 修改客户端代码
- 对服务端校验部分代码进行修改
- 在电脑上使用安卓模拟器(推荐)

## 不足以及下个版本的优化内容

### 不足

1. 对安全性方面考虑的不够,如SQL注入问题、客户端发送`token`的方式是否会造成XSS、CSRF的问题、生成`token`时没设置过期时间带来的问题
1. 注册的方式是否跟过于单一,没有提供第三方注册以及登录的方式(客户端限制)
1. 视频投稿中,对上传的视频时间没有限制、长视频上传速度过慢
1. 数据库中对点赞等字段的更新,在此版本中使用的是触发器进行更新,这种方式带来的性能问题、更新操作没在业务层面做是否会带来出现问题排查困难的问题(此问题不确定)
1. 单机部署项目带来的性能瓶颈问题

### 下个版本的优化内容(大致优化想法)

1. 对安全性方面对应采用对特殊字符进行过滤来应对SQL注入以及XSS的问题,采用加服务端加时间戳的方式来防止CSRF,设置`token`过期时间

2. 对视频上传时间加以限制

3.  对点赞等频繁进行更新的字段考虑采用`Redis`进行存储,不实时落库,而是隔一段时间统一落库

4. 对单机性能的优化,如

   - 采用微服务的方式细化模块,模块与模块之间采用RPC通信
   - 多机部署,采用`Nginx`做负载均衡

   **此步优化将对进行优化时,系统整体的情况进行考虑,如果系统的体量过小,单机完全可以承受,将不会进行此步优化,避免对系统进行过度优化**

5. 可能会考虑对客户端一起进行优化,从而接入更多的注册登录方式以及其他功能



## V3.0